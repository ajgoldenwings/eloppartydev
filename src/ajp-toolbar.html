<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="styles/ajp-common-styles.html">

<dom-module id="ajp-toolbar">

	<template>

		<style include="ajp-common-styles">

			app-header {
				@apply(--layout-fixed-top);
				z-index: 1;
				background-color: rgba(255, 255, 255, 0.95);
				--app-header-shadow: {
					box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);
					height: 10px;
					bottom: -10px;
				};
			}

			paper-icon-button {
				color: var(--app-primary-color);
			}

			/*.left-bar-item {
				width: 40px;
			}*/

			.logo {
				text-align: center;
			}

			.logo a {
				font-size: 25px;
				font-weight: 600;
				letter-spacing: 0.2em;
				color: var(--app-primary-color);
				text-decoration: none;
				/* required for IE 11, so this <a> can receive pointer events */
				display: inline-block;
				pointer-events: auto;
			}

			.to-settings  {
				display: none;
			}

			:host {
				--paper-icon-button-ink-color: var(--app-accent-color);
			}

			.back-btn, .to-settings {
				display: none;
			}

			:host([page=settings]) .back-btn  {
				display: flex;
			}

			:host([page=change-password-confirm]) .to-settings,
			:host([page=change-password-current]) .to-settings,
			:host([page=change-password-new]) .to-settings  {
				display: flex;
			}

			:host([page=settings]) .logo,
			:host([page=change-password-confirm]) .logo,
			:host([page=change-password-current]) .logo,
			:host([page=change-password-new]) .logo {
				padding-right: 40px;
			}

		</style>

		<app-header role="navigation" id="header" effects="waterfall" condenses reveals>
			<app-toolbar>
				<div class="left-bar-item">
					<a class="back-btn" href="/action" tabindex="-1">
						<paper-icon-button icon="arrow-back" aria-label="Go back"></paper-icon-button>
					</a>
				</div>
				<div class="left-bar-item">
					<a class="to-settings" href="/settings">
						<paper-icon-button icon="arrow-back" aria-label="Go back" on-click="_clearForms"></paper-icon-button>
					</a>
				</div>

				<iron-pages id="logo" role="titleLink" selected="[[title]]" attr-for-selected="name" selected-attribute="visible" selected="home" fallbackSelection="home" title>
					<div class="logo action" name="action"><a href="/" aria-label="Elop Party" on-click="_clearForms">Elop Party</a></div>
					<div class="logo home" name="home"><a href="/action" aria-label="Elop Party" on-click="_clearForms">Elop Party</a></div>
				</iron-pages>

			</app-toolbar>
		</app-header>

	</template>

	<script>

		Polymer({

			is: 'ajp-toolbar',

			properties: {
				page: {
					type: String,
					reflectToAttribute: true,
					observer: '_pageChanged'
				},

				title: {
					value: "home",
					type: String,
					reflectToAttribute: true
				}
			},

			_clearForms: function(e) {
				this.fire('Main', {typeFire: 'clearForms'});
				this.fire('Main', {typeFire: 'clearPasswordConfirm'});
			},

			_pageChanged: function(page, oldPage) {
				if (page == 'events') {
					this.title = 'home';
				} else {
					this.title = 'action';
				}
			}

		});

	</script>

</dom-module>
